/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={664:(t,e,r)=>{r.d(e,{A:()=>E});var n=r(601),o=r.n(n),i=r(314),c=r.n(i),a=r(417),u=r.n(a),s=new URL(r(267),r.b),l=new URL(r(414),r.b),f=new URL(r(684),r.b),p=new URL(r(655),r.b),y=new URL(r(769),r.b),h=new URL(r(242),r.b),d=new URL(r(878),r.b),b=new URL(r(418),r.b),m=new URL(r(773),r.b),v=c()(o()),g=u()(s),x=u()(l),w=u()(f),_=u()(p),k=u()(y),S=u()(h),j=u()(d),O=u()(b),P=u()(m);v.push([t.id,`*{margin:0;padding:0}body{min-height:100vh}.tetris{position:relative;display:flex;flex-direction:column;width:100%;height:100vh}.tetris__next-shape-container-on-mobile{position:absolute;top:10px;right:10px}@media(min-width: 768px){.tetris__next-shape-container-on-mobile{display:none}}.tetris__next-shape-mobile{position:absolute;top:30px;right:60px}.tetris__content{flex:1}.tetris__header{display:flex;justify-content:center;align-items:center}.tetris__header-title{text-align:center;margin:50px 0}@media(min-width: 768px)and (max-width: 1024px){.tetris__header-title{font-size:30px;margin:30px 0}}@media(max-width: 768px){.tetris__header-title{font-size:20px;margin:20px 0}}.tetris__body{display:flex;justify-content:center;align-items:center;gap:100px}.tetris__box{width:200px;height:400px;border:1px solid #000}.tetris_box_border-size_3{border-width:3px}.tetris__next-shape{text-align:center;width:192px;height:32px;margin-top:65px}.tetris__score-label{text-align:center;margin-top:15px;font-size:20px;font-weight:bold}.tetris__score-value{text-align:center;margin-top:15px;font-size:20px;font-weight:bold}.tetris__action-button{text-align:center;margin-top:25px;font-size:20px;font-weight:bold;width:130px;height:20px;border-style:solid;border-width:2px;padding:15px;margin-left:20px;border-color:#4f4cca;color:#4f4cca;cursor:pointer}.tetris__action-button_is-pause-button{border-color:#57b25a;color:#57b25a}@media(max-width: 768px){.tetris__action-button_is-pause-button{display:none}}.tetris__action-button:hover{background-color:#4f4cca;color:#fff}.tetris__action-button_is-pause-button:hover{background-color:#57b25a;color:#fff}.block{position:absolute;display:block;box-sizing:border-box}.block::after{content:"";position:absolute;display:block;box-sizing:border-box;border:solid 2px #000;top:-5px;left:-5px;right:-5px;bottom:-5px}.block_color_red{background-color:red;border-top:solid 4px #f66;border-right:solid 4px #f66;border-bottom:solid 4px #c00;border-left:solid 4px #c00}.block_color_orange{background-color:#f60;border-top:solid 4px #f93;border-right:solid 4px #f93;border-bottom:solid 4px #c60;border-left:solid 4px #c60}.block_color_magenta{background-color:#c0f;border-top:solid 4px #c6f;border-right:solid 4px #c6f;border-bottom:solid 4px #90c;border-left:solid 4px #90c}.block_color_blue{background-color:blue;border-top:solid 4px #66f;border-right:solid 4px #66f;border-bottom:solid 4px #00c;border-left:solid 4px #00c}.block_color_lime{background-color:lime;border-top:solid 4px #6f6;border-right:solid 4px #6f6;border-bottom:solid 4px #0c0;border-left:solid 4px #0c0}.block_color_yellow{background-color:#ff0;border-top:solid 4px #ff9;border-right:solid 4px #ff9;border-bottom:solid 4px #fc0;border-left:solid 4px #fc0}.block_color_cyan{background-color:#6cf;border-top:solid 4px #9ff;border-right:solid 4px #9ff;border-bottom:solid 4px #39c;border-left:solid 4px #39c}.tetris__box_position_relative{position:relative}.tetris__box_overflow_hidden{overflow:hidden}.tetris__next-shape-container{flex:1;width:80px;height:80px;margin-left:25px;margin-top:30px}.tetris__next-shape-block{position:relative}.tetris__action-game-over{color:red;font-weight:bold;font-size:25px;display:none;margin-top:20px}.tetris__action-button_is-pause-button{visibility:hidden}.tetris__tetris-word{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);color:red;display:none;animation-name:tetris_large;animation-duration:1s;animation-timing-function:ease-in-out}@keyframes tetris_large{from{transform:scale(0)}to{transform:scale(20)}}.tetris__legend{display:flex;justify-content:center;gap:10px;margin-top:20px}@media(max-width: 768px){.tetris__legend{display:none}}.tetris__legend-item{display:flex;align-items:center;gap:5px}.tetris_legend-icon{width:15px;height:15px;border:1px solid #000}.tetris_legend-icon_is-left-icon{width:1em;height:1em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${g})}.tetris_legend-icon_is-right-icon{width:1em;height:1em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${x})}.tetris_legend-icon_is-down-icon{width:1em;height:1em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${w})}.tetris_legend-icon_is-speed-up-icon{width:1em;height:1em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${_})}.tetris_legend-icon_is-rotate-icon{width:1em;height:1em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${k})}.tetris_legend-icon_is-pause-continue-icon{width:1em;height:1em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${S})}.tetris__footer{width:100%;border-top:thin solid #000;display:flex;justify-content:space-between;padding:10px 20px;box-sizing:border-box}.tetris__developer-info{font-size:18px;flex:1}.tetris__company{margin-left:30px}.tetris__company-logo{background-image:url(${j});background-size:100% 100%;background-repeat:no-repeat;width:100px;height:31px}@media(max-width: 768px){.tetris__box_is-hidden-on-mobile{display:none}}.tetris__mobile-controllers{display:flex;justify-content:center;gap:20px;margin-top:30px}@media(min-width: 768px){.tetris__mobile-controllers{display:none}}.tetris__controller-icon{width:15px;height:15px;border:1px solid #000;border-radius:3px}.tetris__controller-icon_is-rotate-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${k})}.tetris__controller-icon_is-play-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${O})}.tetris__controller-icon_is-pause-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${S})}.tetris__mobile-move-controllers{display:grid;grid-template-areas:".     up    ." "left  .     right" ".     down  .";margin-top:-18px;gap:3px}.tetris__controller-icon_is-left-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${g})}.tetris__controller-icon_is-right-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${x})}.tetris__controller-icon_is-down-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${w})}.tetris__controller-icon_is-up-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${_})}.tetris__controller-icon_grid-area_left{grid-area:left}.tetris__controller-icon_grid-area_right{grid-area:right}.tetris__controller-icon_grid-area_down{grid-area:down}.tetris__controller-icon_grid-area_up{grid-area:up}.tetris__score-on-mobile{display:none}@media(max-width: 768px){.tetris__score-on-mobile{display:flex;justify-content:center;gap:20px;margin-bottom:10px}}.tetris__action-game-over-on-mobile{display:none;border:3px solid red;background-color:#90ee90;color:red;font-weight:bold;font-size:30px;padding:20px;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:300px;z-index:1;opacity:.9}.tetris__controller-icon_is-restart-icon{width:1.5em;height:1.5em;background-repeat:no-repeat;background-size:100% 100%;background-image:url(${P})}`,""]);const E=v},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var c={};if(n)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(c[u]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&c[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var i={},c=[],a=0;a<t.length;a++){var u=t[a],s=n.base?u[0]+n.base:u[0],l=i[s]||0,f="".concat(s," ").concat(l);i[s]=l+1;var p=r(f),y={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)e[p].references++,e[p].updater(y);else{var h=o(y,n);n.byIndex=a,e.splice(a,0,{identifier:f,updater:h,references:1})}c.push(f)}return c}function o(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var i=n(t=t||[],o=o||{});return function(t){t=t||[];for(var c=0;c<i.length;c++){var a=r(i[c]);e[a].references--}for(var u=n(t,o),s=0;s<i.length;s++){var l=r(i[s]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=u}}},659:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},684:(t,e,r)=>{t.exports=r.p+"1b1abb0245265d4e072c.svg"},267:(t,e,r)=>{t.exports=r.p+"87c4d962c5256de25334.svg"},414:(t,e,r)=>{t.exports=r.p+"40028be3d23b63378d63.svg"},655:(t,e,r)=>{t.exports=r.p+"53aa23c42310a0c9c3e5.svg"},878:(t,e,r)=>{t.exports=r.p+"f5317b48cc78866b921f.png"},242:(t,e,r)=>{t.exports=r.p+"499a7487222266e6d0a2.svg"},418:(t,e,r)=>{t.exports=r.p+"4943628bdd77bbe1a849.svg"},773:(t,e,r)=>{t.exports=r.p+"55dd5c5341667255ce3a.svg"},769:(t,e,r)=>{t.exports=r.p+"e2bb795bf5b14f594c0d.svg"}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.m=t,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=document.baseURI||self.location.href,r.nc=void 0,(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}var o=function(){return t=function t(e){var r=e.x,n=e.y,o=e.unitSize,i=e.color;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=r,this.y=n,this.unitSize=o,this.color=i},(r=[{key:"serialize",value:function(){return null}},{key:"getHtmlElement",value:function(){return this.blockDiv=document.createElement("div"),this.blockDiv.classList.add("block"),this.blockDiv.classList.add("block_color_".concat(this.color)),this.blockDiv.style.width="".concat(this.unitSize,"px"),this.blockDiv.style.height="".concat(this.unitSize,"px"),this.blockDiv.style.top="".concat(this.y*this.unitSize,"px"),this.blockDiv.style.left="".concat(this.x*this.unitSize,"px"),this.blockDiv}}])&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var u=function(){return t=function t(e){var r=e.x,n=e.y,o=e.playingField,i=e.rotation,c=e.unitSize,a=e.gridManager;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=r,this.y=n,this.playingField=o,this.rotation=i,this.unitSize=c,this.gridManager=a,this.blocks=this.createBlocks()},(e=[{key:"createBlocks",value:function(){var t=this;return this.constructor.blockOptions[this.rotation].map((function(e){return new o({x:e.x+t.x,y:e.y+t.y,unitSize:t.unitSize,color:t.constructor.color})}))}},{key:"draw",value:function(t){this.blocks.forEach((function(e){return t.appendChild(e.getHtmlElement())}))}},{key:"checkCollision",value:function(t){return!t.every((function(t){return t.x>=0&&t.x<=9&&t.y<=19}))||this.gridManager.blocks.some((function(e){return t.find((function(t){return t.x===e.x&&t.y===e.y}))}))}},{key:"clearBlocks",value:function(){var t=this;this.blocks.forEach((function(e){t.playingField.removeChild(e.blockDiv)}))}},{key:"simulateMove",value:function(t){var e=this.x,r=this.y,n=this.rotation;this.clearBlocks(),t();var o=this.createBlocks();return this.checkCollision(o)?(this.y=r,this.x=e,this.rotation=n,this.draw(this.playingField),!1):(this.blocks=o,this.draw(this.playingField),!0)}},{key:"moveDown",value:function(){var t=this;return this.simulateMove((function(){return t.y+=1}))}},{key:"moveLeft",value:function(){var t=this;return this.simulateMove((function(){return t.x-=1}))}},{key:"moveRight",value:function(){var t=this;return this.simulateMove((function(){return t.x+=1}))}},{key:"rotate",value:function(){var t=this;return this.simulateMove((function(){return t.rotation=(t.rotation+90)%360}))}}])&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}function p(t,e,r){return e=h(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,r||[],h(t).constructor):e.apply(t,r))}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),r=e,n=[{key:"color",get:function(){return"cyan"}},{key:"blockOptions",get:function(){return{0:[{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:3,y:1}],90:[{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3}],180:[{x:0,y:2},{x:1,y:2},{x:2,y:2},{x:3,y:2}],270:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3}]}}}],null&&l(r.prototype,null),n&&l(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function g(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}function x(t,e,r){return e=_(e),function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w()?Reflect.construct(e,r||[],_(t).constructor):e.apply(t,r))}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(w=function(){return!!t})()}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}var S=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(e,t),r=e,n=[{key:"color",get:function(){return"blue"}},{key:"blockOptions",get:function(){return{0:[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:2,y:1}],90:[{x:1,y:1},{x:1,y:0},{x:1,y:2},{x:2,y:0}],180:[{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:2,y:2}],270:[{x:0,y:2},{x:1,y:2},{x:1,y:1},{x:1,y:0}]}}}],null&&v(r.prototype,null),n&&v(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function P(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}function E(t,e,r){return e=T(e),function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,L()?Reflect.construct(e,r||[],T(t).constructor):e.apply(t,r))}function L(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(L=function(){return!!t})()}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}var C=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(e,t),r=e,n=[{key:"color",get:function(){return"orange"}},{key:"blockOptions",get:function(){return{0:[{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:2,y:0}],90:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:2,y:2}],180:[{x:0,y:1},{x:0,y:2},{x:1,y:1},{x:2,y:1}],270:[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:1,y:2}]}}}],null&&O(r.prototype,null),n&&O(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function z(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}function D(t,e,r){return e=I(e),function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,r||[],I(t).constructor):e.apply(t,r))}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}var $=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(e,t),r=e,n=[{key:"color",get:function(){return"yellow"}},{key:"blockOptions",get:function(){return{0:[{x:1,y:0},{x:1,y:1},{x:2,y:0},{x:2,y:1}],90:[{x:1,y:0},{x:1,y:1},{x:2,y:0},{x:2,y:1}],180:[{x:1,y:0},{x:1,y:1},{x:2,y:0},{x:2,y:1}],270:[{x:1,y:0},{x:1,y:1},{x:2,y:0},{x:2,y:1}]}}}],null&&R(r.prototype,null),n&&R(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function G(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}function N(t,e,r){return e=W(e),function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U()?Reflect.construct(e,r||[],W(t).constructor):e.apply(t,r))}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U=function(){return!!t})()}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}var Y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(e,t),r=e,n=[{key:"color",get:function(){return"lime"}},{key:"blockOptions",get:function(){return{0:[{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:2,y:0}],90:[{x:1,y:0},{x:1,y:1},{x:2,y:1},{x:2,y:2}],180:[{x:0,y:2},{x:1,y:2},{x:1,y:1},{x:2,y:1}],270:[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:2}]}}}],null&&q(r.prototype,null),n&&q(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,V(n.key),n)}}function V(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:e+""}function X(t,e,r){return e=tt(e),function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Z()?Reflect.construct(e,r||[],tt(t).constructor):e.apply(t,r))}function Z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Z=function(){return!!t})()}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}function et(t,e){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},et(t,e)}var rt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&et(t,e)}(e,t),r=e,n=[{key:"color",get:function(){return"magenta"}},{key:"blockOptions",get:function(){return{0:[{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:2,y:1}],90:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:2,y:1}],180:[{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:1,y:2}],270:[{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:1,y:2}]}}}],null&&Q(r.prototype,null),n&&Q(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u);function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,it(n.key),n)}}function it(t){var e=function(t,e){if("object"!=nt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nt(e)?e:e+""}function ct(t,e,r){return e=ut(e),function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,at()?Reflect.construct(e,r||[],ut(t).constructor):e.apply(t,r))}function at(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(at=function(){return!!t})()}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}var lt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ct(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(e,t),r=e,n=[{key:"color",get:function(){return"red"}},{key:"blockOptions",get:function(){return{0:[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:2,y:1}],90:[{x:1,y:1},{x:1,y:2},{x:2,y:1},{x:2,y:0}],180:[{x:0,y:1},{x:1,y:1},{x:1,y:2},{x:2,y:2}],270:[{x:0,y:1},{x:0,y:2},{x:1,y:1},{x:1,y:0}]}}}],null&&ot(r.prototype,null),n&&ot(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u),ft={unitSize:window.innerWidth<768?25:20,tetrisHeight:20,tetrisWidth:10};function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function yt(t){return function(t){if(Array.isArray(t))return dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ht(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){if(t){if("string"==typeof t)return dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mt(n.key),n)}}function mt(t){var e=function(t,e){if("object"!=pt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pt(e)?e:e+""}var vt=function(){return t=function t(e){var r=e.playingField;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.playingField=r,this.blocks=[],this.unitSize=ft.unitSize,this.drawGrid()},(e=[{key:"getLinesToClear",value:function(){var t=[],e=[],r=[];return this.blocks.forEach((function(e){t[e.y]=t[e.y]?[].concat(yt(t[e.y]),[e]):[e]})),t.forEach((function(t,n){10===t.length&&(r.push(n),e=[].concat(yt(e),yt(t)))})),{lineIndices:r,blocksToRemove:e}}},{key:"manageGrid",value:function(){var t,e=this.getLinesToClear(),r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ht(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(a)throw i}}}}(e.blocksToRemove);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.playingField.removeChild(n.blockDiv),this.blocks.splice(this.blocks.indexOf(n),1)}}catch(t){r.e(t)}finally{r.f()}return e.blocksToRemove.length>0&&(this.blocks=this.reorderBlocks(e.lineIndices)),e.lineIndices.length}},{key:"reorderBlocks",value:function(t){var e=this;this.blocks.forEach((function(t){e.playingField.removeChild(t.blockDiv)}));var r=this.blocks.map((function(e){return new o({x:e.x,y:e.y+t.filter((function(t){return t>e.y})).length,unitSize:e.unitSize,color:e.color})}));return r.forEach((function(t){e.playingField.appendChild(t.getHtmlElement())})),r}},{key:"drawGrid",value:function(){this.playingField.style.width="".concat(ft.unitSize*ft.tetrisWidth,"px"),this.playingField.style.height="".concat(ft.unitSize*ft.tetrisHeight,"px")}}])&&bt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function xt(t){return function(t){if(Array.isArray(t))return wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return wt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _t(){_t=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,c=Object.create(i.prototype),a=new T(n||[]);return o(c,"_invoke",{value:O(t,r,a)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",y="suspendedYield",h="executing",d="completed",b={};function m(){}function v(){}function g(){}var x={};s(x,c,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(M([])));_&&_!==r&&n.call(_,c)&&(x=_);var k=g.prototype=m.prototype=Object.create(x);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,c,a){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==gt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,c,a)}),(function(t){r("throw",t,c,a)})):e.resolve(l).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,a)}))}a(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,c){if(o===h)throw Error("Generator is already running");if(o===d){if("throw"===i)throw c;return{value:t,done:!0}}for(n.method=i,n.arg=c;;){var a=n.delegate;if(a){var u=P(a,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:y,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var c=i.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(gt(e)+" is not iterable")}return v.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},S(j.prototype),s(j.prototype,a,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var c=new j(l(t,r,n,o),i);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},S(k),s(k,u,"Generator"),s(k,c,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var u=n.call(c,"catchLoc"),s=n.call(c,"finallyLoc");if(u&&s){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function kt(t,e,r,n,o,i,c){try{var a=t[i](c),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,o)}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jt(n.key),n)}}function jt(t){var e=function(t,e){if("object"!=gt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(e)?e:e+""}var Ot=function(){return t=function t(e){var r=e.gridManager;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridManager=r,this.score=0,this.round=1,this.moveFast=!1,this.sleepID={},this.highScore=0,this.isPaused=!1,this.isRunning=!1,this.gameOver=!1,this.ifMobile=!1},e=[{key:"elements",get:function(){return{playingField:document.querySelector(".js-playing-field"),nextShape:document.querySelector(window.innerWidth<768?".js-next-shape-mobile":".js-next-shape"),scoreField:document.querySelector(window.innerWidth<768?".js-score-mobile":".js-score"),highScore:document.querySelector(window.innerWidth<768?".js-high-score-mobile":".js-high-score"),gameOver:document.querySelector(window.innerWidth<768?".js-game-over-mobile":".js-game-over"),pauseButton:document.querySelector(".js-pause"),newGame:document.querySelector(".js-new-game"),tetrisWord:document.querySelector(".js-tetris-word"),leftButton:document.querySelector(".js-mobile-left"),rightButton:document.querySelector(".js-mobile-right"),downButton:document.querySelector(".js-mobile-down"),upButton:document.querySelector(".js-mobile-up"),rotateButton:document.querySelector(".js-mobile-rotate"),pauseButtonMobile:document.querySelector(".js-mobile-pause"),playButton:document.querySelector(".js-mobile-play")}}},{key:"sleep",value:function(t){var e=this;return new Promise((function(r){var n=e.sleepID;setTimeout((function(){n===e.sleepID?r(!0):r(!1)}),t)}))}},{key:"getRandomShape",value:function(){var t=[b,S,C,$,Y,rt,lt],e=Math.floor(7*Math.random()),r=Math.floor(4*Math.random());return new t[e]({x:0,y:0,playingField:this.elements.playingField,rotation:[0,90,180,270][r],unitSize:window.innerWidth<768?.6*this.gridManager.unitSize:this.gridManager.unitSize,gridManager:this.gridManager})}},{key:"start",value:function(){this.elements.playButton.classList.remove("tetris__controller-icon_is-play-icon"),this.elements.playButton.classList.add("tetris__controller-icon_is-restart-icon"),this.elements.pauseButtonMobile.classList.remove("tetris__controller-icon_is-play-icon"),this.elements.pauseButtonMobile.classList.add("tetris__controller-icon_is-pause-icon"),this.isRunning=!0,this.gameOver=!1,this.sleepID={},this.setupListeners(),this.shape=this.getRandomShape(),this.drawShape(),this.elements.pauseButton.style.visibility="visible",this.elements.newGame.textContent="Restart"}},{key:"drawShape",value:function(){this.shape.x=4,this.shape.y=-2,this.shape.unitSize=this.gridManager.unitSize,this.shape.draw(this.elements.playingField),this.drawNextShape(),this.moveCurrentShape()}},{key:"moveCurrentShape",value:(r=_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.gameOver){t.next=2;break}return t.abrupt("return");case 2:if(this.shape.moveDown()){t.next=7;break}return this.moveFast=!1,this.saveBlocks(),this.checkGameOver()?this.onGameOver():(this.round++,this.shape=this.nextShape,this.drawShape()),t.abrupt("return");case 7:return t.next=9,this.sleep(this.moveFast?5:this.getSleepDuration());case 9:t.sent&&!this.isPaused&&this.moveCurrentShape();case 11:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function c(t){kt(i,n,o,c,a,"next",t)}function a(t){kt(i,n,o,c,a,"throw",t)}c(void 0)}))},function(){return n.apply(this,arguments)})},{key:"setupListeners",value:function(){var t=this;this.onKeyDown=function(e){if(32===e.keyCode)t.togglePause();else if(!t.isPaused)switch(e.keyCode){case 37:t.shape.moveLeft();break;case 39:t.shape.moveRight();break;case 40:t.shape.moveDown();break;case 38:t.sleepID={},t.moveFast=!0,t.moveCurrentShape();break;case 82:t.shape.rotate()}},this.onClickUpButton=function(e){t.sleepID={},t.moveFast=!0,t.moveCurrentShape()},this.onClickMoveLeft=function(e){t.shape.moveLeft()},this.onClickMoveRight=function(e){t.shape.moveRight()},this.onClickMoveDown=function(e){t.shape.moveDown()},this.onClickRotate=function(e){t.shape.rotate()},this.onClickPause=function(e){t.togglePause()},this.onPause=function(){return t.togglePause()},this.elements.pauseButton.addEventListener("click",this.onPause),document.addEventListener("keydown",this.onKeyDown),this.elements.leftButton.addEventListener("click",this.onClickMoveLeft),this.elements.rightButton.addEventListener("click",this.onClickMoveRight),this.elements.downButton.addEventListener("click",this.onClickMoveDown),this.elements.upButton.addEventListener("click",this.onClickUpButton),this.elements.rotateButton.addEventListener("click",this.onClickRotate),this.elements.pauseButtonMobile.addEventListener("click",this.onClickPause)}},{key:"drawNextShape",value:function(){this.clearNextShape(),this.nextShape=this.getRandomShape(),this.nextShape.draw(this.elements.nextShape)}},{key:"clearNextShape",value:function(){this.elements.nextShape.innerHTML=""}},{key:"saveBlocks",value:function(){var t=this;this.gridManager.blocks=[].concat(xt(this.gridManager.blocks),xt(this.shape.blocks));var e=this.gridManager.manageGrid();this.score+=e,this.elements.scoreField.innerHTML=this.score,4===e&&(this.onClearFourLine(),this.score+=4,this.elements.scoreField.innerHTML=this.score,setTimeout((function(){t.elements.tetrisWord.style.display="none"}),1e3))}},{key:"getSleepDuration",value:function(){return 1e3*Math.pow(.9,Math.floor(this.round/10))}},{key:"checkGameOver",value:function(){return this.gridManager.blocks.some((function(t){return 0===t.y}))}},{key:"onGameOver",value:function(){this.elements.highScore.style.display="flex",this.elements.highScore.style.justifyContent="center",this.elements.highScore.style.alignItems="center",this.elements.gameOver.style.display="flex",this.elements.gameOver.style.justifyContent="center",this.elements.gameOver.style.alignItems="center",this.score>this.highScore&&(this.highScore=this.score),this.elements.highScore.textContent=this.highScore,localStorage.setItem("tetrisHighScore",this.highScore),this.removeListeners(),this.isRunning=!1,this.gameOver=!0}},{key:"loadHighScore",value:function(){this.highScore=localStorage.getItem("tetrisHighScore")||0,this.elements.highScore.innerHTML=this.highScore}},{key:"removeListeners",value:function(){console.log("Removing listeners"),document.removeEventListener("keydown",this.onKeyDown),this.elements.pauseButton.removeEventListener("click",this.onPause),this.elements.leftButton.removeEventListener("click",this.onClickMoveLeft),this.elements.rightButton.removeEventListener("click",this.onClickMoveRight),this.elements.downButton.removeEventListener("click",this.onClickMoveDown),this.elements.upButton.removeEventListener("click",this.onClickUpButton),this.elements.rotateButton.removeEventListener("click",this.onClickRotate),this.elements.pauseButtonMobile.removeEventListener("click",this.onClickPause),console.log("remove listener done")}},{key:"clearAll",value:function(){this.elements.playingField.innerHTML="",this.gridManager.blocks=[],this.score=0,this.round=1,this.moveFast=!1,this.isPaused=!1,this.sleepID={},this.clearNextShape(),this.elements.gameOver.style.display="none",this.elements.scoreField.innerHTML=this.score,this.elements.pauseButton.innerHTML="Pause"}},{key:"togglePause",value:function(){this.sleepID={},this.isPaused?(this.elements.pauseButton.innerHTML="Pause",this.elements.pauseButtonMobile.classList.remove("tetris__controller-icon_is-play-icon"),this.elements.pauseButtonMobile.classList.add("tetris__controller-icon_is-pause-icon"),this.isPaused=!1,this.moveCurrentShape()):(this.elements.pauseButton.innerHTML="Continue",this.elements.pauseButtonMobile.classList.add("tetris__controller-icon_is-play-icon"),this.elements.pauseButtonMobile.classList.remove("tetris__controller-icon_is-pause-icon"),this.isPaused=!0)}},{key:"restart",value:function(){console.log("restrat function here"),this.isRunning=!1,this.removeListeners(),this.clearAll(),this.moveFast=!1,this.isPaused=!1,console.log("should restart"),this.start()}},{key:"onClearFourLine",value:function(){this.elements.tetrisWord.style.display="block"}}],e&&St(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}(),Pt=r(72),Et=r.n(Pt),Lt=r(825),Tt=r.n(Lt),Mt=r(659),Ct=r.n(Mt),Bt=r(56),Rt=r.n(Bt),zt=r(540),Dt=r.n(zt),Ft=r(113),It=r.n(Ft),At=r(664),$t={};$t.styleTagTransform=It(),$t.setAttributes=Rt(),$t.insert=Ct().bind(null,"head"),$t.domAPI=Tt(),$t.insertStyleElement=Dt(),Et()(At.A,$t),At.A&&At.A.locals&&At.A.locals,function(){var t=document.querySelector(".js-playing-field"),e=new vt({playingField:t}),r=new Ot({gridManager:e});r.loadHighScore();var n=function(){r.isRunning?(console.log("Game is already running"),r.restart()):(r.gameOver&&r.clearAll(),r.start())};document.querySelector(".js-new-game").addEventListener("click",(function(){n()})),document.querySelector(".js-mobile-play").addEventListener("click",(function(){n()}))}()})()})();